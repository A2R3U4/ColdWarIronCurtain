state_on_startup_initialization = {

	#HDI Cleanup#
	if = {
		limit = {
			has_state_flag = HDI8
		}
		clr_state_flag = HDI7
		clr_state_flag = HDI6
		clr_state_flag = HDI5
		clr_state_flag = HDI4
		clr_state_flag = HDI3
		clr_state_flag = HDI2
		clr_state_flag = HDI1
		clr_state_flag = HDI0
	}
	else_if = {
		limit = {
			has_state_flag = HDI7
		}
		clr_state_flag = HDI6
		clr_state_flag = HDI5
		clr_state_flag = HDI4
		clr_state_flag = HDI3
		clr_state_flag = HDI2
		clr_state_flag = HDI1
		clr_state_flag = HDI0
	}
	else_if = {
		limit = {
			has_state_flag = HDI6
		}
		clr_state_flag = HDI5
		clr_state_flag = HDI4
		clr_state_flag = HDI3
		clr_state_flag = HDI2
		clr_state_flag = HDI1
		clr_state_flag = HDI0
	}
	else_if = {
		limit = {
			has_state_flag = HDI5
		}
		clr_state_flag = HDI4
		clr_state_flag = HDI3
		clr_state_flag = HDI2
		clr_state_flag = HDI1
		clr_state_flag = HDI0
	}
	else_if = {
		limit = {
			has_state_flag = HDI4
		}
		clr_state_flag = HDI3
		clr_state_flag = HDI2
		clr_state_flag = HDI1
		clr_state_flag = HDI0
	}
	else_if = {
		limit = {
			has_state_flag = HDI3
		}
		clr_state_flag = HDI2
		clr_state_flag = HDI1
		clr_state_flag = HDI0
	}
	else_if = {
		limit = {
			has_state_flag = HDI2
		}
		clr_state_flag = HDI1
		clr_state_flag = HDI0
	}
	else_if = {
		limit = {
			has_state_flag = HDI1
		}
		clr_state_flag = HDI0
	}
	else = {
		set_state_flag = HDI0
	}
	
	
	set_variable = { ReligionTotal = 0 }
		#Christian#
		add_to_variable = { ReligionTotal = ReligionChristianityCatholic  }
		add_to_variable = { ReligionTotal = ReligionChristianityProtestant  }
		add_to_variable = { ReligionTotal = ReligionChristianityOrthodox  }
		add_to_variable = { ReligionTotal = ReligionChristianityOriental  }
		#Judaic#
		add_to_variable = { ReligionTotal = ReligionJudaism  }
		#Islamic#
		add_to_variable = { ReligionTotal = ReligionIslamSunni  }
		add_to_variable = { ReligionTotal = ReligionIslamShia  }
		add_to_variable = { ReligionTotal = ReligionIslamIbadi  }
		#Buddhism#
		add_to_variable = { ReligionTotal = ReligionBuddhismVajrayana  }
		add_to_variable = { ReligionTotal = ReligionBuddhismMahayana  }
		add_to_variable = { ReligionTotal = ReligionBuddhismThereveda  }
		#Eastern#
		add_to_variable = { ReligionTotal = ReligionShinto  }
		add_to_variable = { ReligionTotal = ReligionTraditionalEastern  }
		add_to_variable = { ReligionTotal = ReligionConfucian  }
		#Indo-Iranian#
		add_to_variable = { ReligionTotal = ReligionHindu  }
		add_to_variable = { ReligionTotal = ReligionSikh  }
		add_to_variable = { ReligionTotal = ReligionJain  }
		add_to_variable = { ReligionTotal = ReligionTraditionalIranian  }
		#Irreligious#
		add_to_variable = { ReligionTotal = ReligionIrreligious }
		add_to_variable = { ReligionTotal = ReligionAtheist  }
		#Minor/Esoteric#
		add_to_variable = { ReligionTotal = ReligionSpiritual  }
		add_to_variable = { ReligionTotal = ReligionStatist  }
		add_to_variable = { ReligionTotal = ReligionCultistSafe  }
		add_to_variable = { ReligionTotal = ReligionCultistFatal  }
		add_to_variable = { ReligionTotal = ReligionFurry  }
		add_to_variable = { ReligionTotal = ReligionOther  }
		
	if = { #Anti divide by 0
		limit = {
			check_variable = { ReligionTotal = 0 }
		}
		add_to_variable = { ReligionIrreligious = 1 }
		check_variable = { ReligionTotal = 1 }
	}
	
	set_temp_variable = { POP_k = state_population_k } #POP_k is the state population in thousands
	if = { #Anti divide by 0
		limit = {
			check_variable = { POP_k = 0 }
		}
		add_to_temp_variable = { POP_k = 1 }
	}
	
	set_temp_variable = { ReligionValueRatio = ReligionTotal }
	divide_temp_variable = { ReligionValueRatio = POP_k } #Total religious value divided by population. Less than 1 if values are lower, more than 1 if values are higher
	
	#All values are equalized to the population value so they add up to state_population_k, also important for religious drift 
		#Christian#
		divide_variable = { ReligionChristianityCatholic = ReligionValueRatio }
		divide_variable = { ReligionChristianityProtestant = ReligionValueRatio }
		divide_variable = { ReligionChristianityOrthodox = ReligionValueRatio }
		divide_variable = { ReligionChristianityOriental = ReligionValueRatio }
		#Judaic#
		divide_variable = { ReligionJudaism = ReligionValueRatio }
		#Islamic#
		divide_variable = { ReligionIslamSunni = ReligionValueRatio }
		divide_variable = { ReligionIslamShia = ReligionValueRatio }
		divide_variable = { ReligionIslamIbadi = ReligionValueRatio }
		#Buddhism#
		divide_variable = { ReligionBuddhismVajrayana = ReligionValueRatio }
		divide_variable = { ReligionBuddhismMahayana = ReligionValueRatio }
		divide_variable = { ReligionBuddhismThereveda = ReligionValueRatio }
		#Eastern#
		divide_variable = { ReligionShinto = ReligionValueRatio }
		divide_variable = { ReligionTraditionalEastern = ReligionValueRatio }
		divide_variable = { ReligionConfucian = ReligionValueRatio }
		#Indo-Iranian#
		divide_variable = { ReligionHindu = ReligionValueRatio }
		divide_variable = { ReligionSikh = ReligionValueRatio }
		divide_variable = { ReligionJain = ReligionValueRatio }
		divide_variable = { ReligionTraditionalIranian = ReligionValueRatio }
		#Irreligious#
		divide_variable = { ReligionIrreligious = 1 } #Minimum 1
		divide_variable = { ReligionAtheist = ReligionValueRatio }
		#Minor/Esoteric#
		divide_variable = { ReligionSpiritual = ReligionValueRatio }
		divide_variable = { ReligionStatist = ReligionValueRatio }
		divide_variable = { ReligionCultistSafe = ReligionValueRatio }
		divide_variable = { ReligionCultistFatal = ReligionValueRatio }
		divide_variable = { ReligionFurry = ReligionValueRatio }
		divide_variable = { ReligionOther = ReligionValueRatio }
	
}

initialize_1949_setup = {
	if = {
		limit = {
			has_state_flag = HDI0
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI1
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI2
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI3
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI4
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI5
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI6
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI7
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI8
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
}

initialize_1960_setup = {
	if = {
		limit = {
			has_state_flag = HDI0
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI1
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI2
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI3
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI4
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI5
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI6
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_2
	}
	else_if = {
		limit = {
			has_state_flag = HDI7
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_2
	}
	else_if = {
		limit = {
			has_state_flag = HDI8
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_2
	}
}

initialize_1973_setup = {
	if = {
		limit = {
			has_state_flag = HDI0
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI1
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI2
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI3
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI4
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI5
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI6
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_2
	}
	else_if = {
		limit = {
			has_state_flag = HDI7
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_2
	}
	else_if = {
		limit = {
			has_state_flag = HDI8
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_2
	}
}

initialize_1980_setup = {
	if = {
		limit = {
			has_state_flag = HDI0
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI1
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI2
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI3
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI4
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI5
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_2
	}
	else_if = {
		limit = {
			has_state_flag = HDI6
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_2
	}
	else_if = {
		limit = {
			has_state_flag = HDI7
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_3
	}
	else_if = {
		limit = {
			has_state_flag = HDI8
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_3
	}
}

initialize_1991_setup = {
	if = {
		limit = {
			has_state_flag = HDI0
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI1
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI2
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI3
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_2
	}
	else_if = {
		limit = {
			has_state_flag = HDI4
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_2
	}
	else_if = {
		limit = {
			has_state_flag = HDI5
		}
		set_state_flag = grid_level_3
		set_state_flag = telecoms_level_3
	}
	else_if = {
		limit = {
			has_state_flag = HDI6
		}
		set_state_flag = grid_level_3
		set_state_flag = telecoms_level_3
	}
	else_if = {
		limit = {
			has_state_flag = HDI7
		}
		set_state_flag = grid_level_3
		set_state_flag = telecoms_level_3
	}
	else_if = {
		limit = {
			has_state_flag = HDI8
		}
		set_state_flag = grid_level_3
		set_state_flag = telecoms_level_3
	}
}

initialize_2000_setup = {
	if = {
		limit = {
			has_state_flag = HDI0
		}
		
	}
	else_if = {
		limit = {
			has_state_flag = HDI1
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI2
		}
		set_state_flag = grid_level_1
		set_state_flag = telecoms_level_1
	}
	else_if = {
		limit = {
			has_state_flag = HDI3
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_2
	}
	else_if = {
		limit = {
			has_state_flag = HDI4
		}
		set_state_flag = grid_level_2
		set_state_flag = telecoms_level_2
	}
	else_if = {
		limit = {
			has_state_flag = HDI5
		}
		set_state_flag = grid_level_3
		set_state_flag = telecoms_level_3
	}
	else_if = {
		limit = {
			has_state_flag = HDI6
		}
		set_state_flag = grid_level_3
		set_state_flag = telecoms_level_4
	}
	else_if = {
		limit = {
			has_state_flag = HDI7
		}
		set_state_flag = grid_level_3
		set_state_flag = telecoms_level_4
	}
	else_if = {
		limit = {
			has_state_flag = HDI8
		}
		set_state_flag = grid_level_3
		set_state_flag = telecoms_level_4
	}
}