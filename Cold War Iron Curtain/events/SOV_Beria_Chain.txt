add_namespace = SOV_Beria_Struggle

country_event = {

    id = SOV_Beria_Struggle.1
    title = "The Struggle for Power"
    desc = SOV_Beria_Struggle.1.d

    fire_only_once = yes
	is_triggered_only = yes


    option = {
        name = "What to do... What to do..."

        hidden_effect = {
            country_event = {
            days = 10 
            id = SOV_Beria_Struggle.2
            }
        }
        
    }
}
country_event = {

    id = SOV_Beria_Struggle.2
    title = "Launching a limited version of the Purge?"
    desc = SOV_Beria_Struggle.2.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "Semper Primus"

        country_event = {
            days = 15
            id = SOV_Beria_Struggle.3
            set_country_flag = infamy_2
            set_country_flag = support_2
        }
    }
    option = {
        name = "Better Follow Malenkov Cautiousness"
    }

}
country_event = {

    id = SOV_Beria_Struggle.3
    title = "Falsifying Elements Against Voroshilov"
    desc = SOV_Beria_Struggle.3.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "This might prove very useful later on"
        
        hidden_effect = {
            country_event = {
            id = SOV_Beria_Struggle.4
            days = 30
            }
        }
    }
    option = {
        name = "Comrade Voroshilov is white as snow!"

        hidden_effect = {
            country_event = {
                id = SOV_Beria_Struggle.42
                days = 50
            }
        }
    }

}
country_event = {

    id = SOV_Beria_Struggle.4
    title = "Of the Use of Forged Documents"
    desc = SOV_Beria_Struggle.4.d

    fire_only_once = yes
	is_triggered_only = yes
    
    option = {
        name = "Make him understand he's in trouble"
        hidden_effect = {
            country_event = {
                days = 80 
                id = SOV_Beria_Struggle.5
            }
        }
        if = {
            limit = {
                has_country_flag = infamy_2
                has_country_flag = support_2
            }
            clr_country_flag = infamy_2
            clr_country_flag = support_2 
            set_country_flag = infamy_4
            set_country_flag = support_5

            else = {
                set_country_flag = infamy_2
                set_country_flag = support_3
            }
        }
        
    }

    option = {
        name = "Incriminating Voroshilov would be insulting Comrade Stalin's Death!"
        hidden_effect = {
            country_event = {
            days = 30 
            id = SOV_Beria_Struggle.41
            }
        }    
    }

    

}
country_event = {

    id = SOV_Beria_Struggle.41
    title = "Preparing an Army Depoliticization Reform?"
    desc = SOV_Beria_Struggle.41.d

    fire_only_once = yes
	is_triggered_only = yes
    
    option = {
        name = "This will allow us to gain support of Zhukov!"
        if = {
            limit = {
                has_country_flag = support_2
            }
            clr_country_flag = support_2 
            set_country_flag = support_4
        
        else = {
            set_country_flag = support_2
            }
        }
        hidden_effect = {  
            country_event = {
            id = SOV_Beria_Struggle.5
            days = 50
            }
        } 
    }

    option = {
        name = "Let us bide our time"

        hidden_effect = {
            country_event = {
                id = SOV_Beria_Struggle.5
                days = 50
            }
        }
    }
    
}
country_event = {

    id = SOV_Beria_Struggle.42
    title = "Rallying Iron Lazar"
    desc = SOV_Beria_Struggle.42.d

    fire_only_once = yes
	is_triggered_only = yes
    
    option = {
        name = "We need to gather the Old Guard against the Khrushchevites!"

        country_event = {
            id = SOV_Beria_Struggle.5
            days = 30 
        }
        set_country_flag = old_guard_path
    }

    option = {
        name = "Compromise is the first step to losing ground!"
    }
}

country_event = {

    id = SOV_Beria_Struggle.5
    title = "About our Stance on the Berlin Situation"
    desc = SOV_Beria_Struggle.5.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "Send Molotov on a prolonged trip to calm the situation in Berlin"

        hidden_effect = {
            country_event = {
            id = SOV_Beria_Struggle.6
            days = 30
            }
        }
            
        if = {
            limit = {
            has_country_flag = infamy_4
            has_country_flag = support_5
            }
            clr_country_flag = infamy_4
            clr_country_flag = support_5
            set_country_flag = infamy_3
            set_country_flag = support_7
        }
        else_if = {
            limit = {
                has_country_flag = support_3
                has_country_flag = infamy_2
            }
            clr_country_flag = infamy_2
            set_country_flag = infamy_4
        }
        else_if = {
            limit = {
                has_country_flag = old_guard_path
            }
            #OLD GUARD PATH TO DO
        }
    }
    option = {
        name = "This poor old man is of no use, he can't harm us or our rivals! Don't send him"

        hidden_effect = {
            country_event = {
            id = SOV_Beria_Struggle.6
            days = 30
            }
        }

        if = {
            limit = {
                has_country_flag = support_3
                has_country_flag = infamy_2
            }
            clr_country_flag = infamy_2
            set_country_flag = infamy_4
        }
    }

}
country_event = {

    id = SOV_Beria_Struggle.6
    title = "Arresting Bulganin?"
    desc = SOV_Beria_Struggle.6.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "Arrest him by order of the MVD"

        if = {
            limit = {
                has_country_flag = infamy_3
                has_country_flag = support_7
            }
            clr_country_flag = infamy_3
            clr_country_flag = support_7
            set_country_flag = infamy_4
            set_country_flag = support_8


            hidden_effect = {

                country_event = {
                days = 30 
                id = SOV_Beria_Struggle.71

                ##Beria Potentially Winning Path##
                }   
            }
            
        }
        else_if = {
            limit = {
                has_country_flag = support_3
                has_country_flag = infamy_4
            }
            clr_country_flag = infamy_4
            clr_country_flag = support_3
            set_country_flag = infamy_5
            set_country_flag = support_4   

            hidden_effect = {

                country_event = {
                days = 30 
                id = SOV_Beria_Struggle.71

                ##Malenkov Winning Path##
                }   
            }
        }

    }
    option = {
        name = "Such a bold move would only weaken us"

        hidden_effect = {
            country_event = {
                id = SOV_Beria_Struggle.71
                days = 30
            }
        }
    }
}
country_event = {
    

    ##Beria Malenkov Winning Path Potentially##

    id = SOV_Beria_Struggle.71
    title = "The Assassination of Shepilov"
    desc = SOV_Beria_Struggle.71.d

    fire_only_once = yes
	is_triggered_only = yes


    option = {
        name = "Khrushchev will lose his popular platform!"

        ##Malenkov wins and Beria gets purged if support is high enough##

        if = {
            limit = {
                has_country_flag = support_4
                has_country_flag = infamy_5
            }
            hidden_effect = {
                country_event = {
                    days = 10 
                    id = SOV_Beria_Struggle.82
                }
            } 
        }
        else_if = {
            limit = {
                has_country_flag = infamy_4
                has_country_flag = support_8
            }
            hidden_effect = {
                country_event = {
                    days = 10 
                    id = SOV_Beria_Struggle.82
                }
            }
            
            else = {  ##Khrushchev ultimately wins because Malenkov couldn't gather enough support##
            hidden_effect = {
                
                load_focus_tree = SOV_Khruschev
		    kill_country_leader = yes
		    create_country_leader = {
			name = "Nikita Khrushchev"
			picture = "Nikita_Khrushchev.dds"
			ideology = marxism_leninism
			traits = {
				Popular_Premier
				Ingenuous_Reformer
				Eccentric_Research_Enthusiast
				Affable_Diplomat
			}
                country_event = 
                    id = news.1030
                    days = 5   
                }
            }         
        }
        }  
        
    
    }
    option = {
        name = "Purging too much would harm our goals... for now"

       ## BERIA with Malenkov as puppet wins WINS##

        hidden_effect = {
            country_event = {
                id = SOV_Beria_Struggle.81 
                days = 30
            }
        }
    }
}
country_event = {

    id = SOV_Beria_Struggle.81
    title = "Final Vote to Sideline Khrushchevites"
    desc = SOV_Beria_Struggle.81.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "Beria will assume Premiership"

        hidden_effect = {
            add_political_power = 1000
        }
    }
}
country_event = {

    id = SOV_Beria_Struggle.82
    title = "Final Vote to Sideline Khrushchevites"
    desc = SOV_Beria_Struggle.82.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "Malenkov will also assume Premiership"

        country_event = {
            days = 10 
            id = SOV_Beria_Struggle.9
        }
    }
}
country_event = {

    id = SOV_Beria_Struggle.9
    title = "Beria arrested and executed"
    desc = SOV_Beria_Struggle.9.d

    fire_only_once = yes
	is_triggered_only = yes

    option = "He pushed too far his resources"
}